<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>リダイレクト中...</title>
  <script>
    // GitHub Pages SPA fallback
    // /Gym-High-Bar-live-result/competition/xxx/admin
    // -> /Gym-High-Bar-live-result/competition/?p=xxx/admin
    (function() {
      var loc = window.location;
      var path = loc.pathname;
      // Find the /competition/ part and split
      var compIdx = path.indexOf('/competition/');
      if (compIdx >= 0) {
        var basePath = path.substring(0, compIdx);
        var afterComp = path.substring(compIdx + '/competition/'.length);
        // Remove trailing slash
        if (afterComp.endsWith('/')) afterComp = afterComp.slice(0, -1);
        var newUrl = loc.protocol + '//' + loc.host + basePath + '/competition/?p=' +
          encodeURIComponent(afterComp) + loc.hash;
        loc.replace(newUrl);
      } else {
        // Not a competition path, go home
        var base = path.split('/').slice(0, 2).join('/');
        loc.replace(loc.protocol + '//' + loc.host + base + '/');
      }
    })();
  </script>
</head>
<body>
  <p style="text-align:center;margin-top:40px;color:#666;">リダイレクト中...</p>
</body>
</html>
